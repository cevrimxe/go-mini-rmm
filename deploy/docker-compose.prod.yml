version: "3.8"

services:
  server:
    image: ghcr.io/cevrimxe/go-mini-rmm-server:latest
    container_name: rmm-server
    ports:
      - "9090:9090"
    volumes:
      - rmm-data:/app/data
    command: ["-addr", ":9090", "-db", "/app/data/rmm.db"]
    restart: unless-stopped
    labels:
      - "com.centurylinklabs.watchtower.enable=true"

  # containrrr/watchtower eski Docker API (1.25) kullaniyor; Docker 24+ daemon 1.44+ istiyor.
  # nickfedor/watchtower fork'u guncel API destekli, ayarlar ayni.
  watchtower:
    image: nickfedor/watchtower:latest
    container_name: watchtower
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    command: --interval 60 --cleanup --label-enable
    restart: unless-stopped

volumes:
  rmm-data:
